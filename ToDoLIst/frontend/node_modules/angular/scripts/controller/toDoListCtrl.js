angular.module("toDoLists").controller("toDoListsCtrl", function ($scope, addTaks, deletTask) {


    // função para adicionar os dados
    $scope.addList = function (toDoList) {
       addTaks.addTaks(toDoList)
       .then(function (response) {
            delete $scope.toDoList;
            $scope.taskForm.$setPristine();
       })
       .catch (function (error) {
        console.error ("Aconteceu um error ao adicionar tarefa", error)
       })
    }

    // função para pegar os dados da API
    $scope.carregarList = function () {
        addTaks.showTaks()
        .then(function (response) {
            $scope.toDoLists = response.data;
        })
        .catch (function (error) {
            console.error ("Houver um error ao pegar as tarefas", error)
        })
    }

    $scope.delet = function (id) {
        deletTask.deleteTask (id)
        .then(function () {
            console.log("Tarefa deletada com sucesso")
            $scope.carregarList();
        })
        .catch (function (error) {
            console.error("Error ao deleta Tarefa", error)
        })
    }

    $scope.carregarList();
})

